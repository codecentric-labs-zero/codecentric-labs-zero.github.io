---
layout: default
title: React Native guide
description:
---
<section class="bs-docs-section">
  <h1 id="first-level" class="page-header">Overview</h1>
  <p>
    This is a collection of guides documenting common activities
    while developing react-native applications.
  </p>
</section>

<section class="bs-docs-section">
  <h1 id="bootstrapping">Bootstrapping</h1>
  <p>
    You can use our <a href="https://github.com/codecentric-labs-zero/react-native-project-template/tree/create-generator">Yeoman generator</a> for bootstrapping a new react-native application.
    Follow the instructions in the README.
  </p>
</section>

<section class="bs-docs-section">
  <h1 id="cd">Continuous delivery</h1>
  <p>
    Unfortunately, there are still a lot of manual steps in configuring the continuous delivery pipeline for a mobile application
    written in react-native. We actively search for better ways of doing this, but in the meantime, you'll need to do the following
    (please be aware that this guide assumes that you bootstrapped the application as described above):
  </p>
  <h3 id="prepare-ios">iOS project files</h3>
  <p>
    In order to be able to actually delivery the application via BuddyBuild and iTunes Connect, you will need to modify a few
    native resources.
  </p>
  <h4>1. Product name</h4>
  <p>
    In Xcode, inside the project's <code>Build Settings</code>, choose a <code>Product Bundle Identifiers</code>, and a
    <code>Product Name</code>.<br/><br/>
    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#productName" aria-expanded="false" aria-controls="productName">
      Show/hide Screenshot
    </button>
    <div class="collapse" id="productName">
      <img class="img-responsive" src="../assets/images/react-native-product-name.png" />
    </div>
    <br/>
  </p>
  <h4>2. Code signing</h4>
  <p>
    Set up <code>Code Signing Identity</code> to <code>iOS Developer</code> for automated code signing in
    <a href="https://buddybuild.com">BuddyBuild</a>.<br/><br/>
    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#codeSigning" aria-expanded="false" aria-controls="codeSigning">
      Show/hide Screenshot
    </button>
    <div class="collapse" id="codeSigning">
      <img class="img-responsive" src="../assets/images/react-native-code-signing.png" />
    </div>
    <br/>
  <h4>3. App icons (optional)</h4>
  <p>
    Depending on the target platform, modify default application icons in <code>Images.xcassets</code>.<br/><br/>
    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#appIcons" aria-expanded="false" aria-controls="appIcons">
      Show/hide Screenshot
    </button>
    <div class="collapse" id="appIcons">
      <img class="img-responsive" src="../assets/images/react-native-app-icons.png" />
    </div>
    <br/>
  </p>
  <h4>4. Launch screen</h4>
  <p>
    React-native comes with a standard launch screen but you might want to modify it. In Xcode, change <code>LaunchScreen.xib</code>
    to fit your needs.<br/><br/>
    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#launchScreen" aria-expanded="false" aria-controls="launchScreen">
      Show/hide Screenshot
    </button>
    <div class="collapse" id="launchScreen">
      <img class="img-responsive" src="../assets/images/react-native-launch-screen.png" />
    </div>
    <br/>
  </p>
  <h3 id="prepare-android">Android project files</h3>
  <p>
    In order to be able to actually delivery the application via BuddyBuild and Google Play, you will need to modify a few
    native resources.
  </p>
  <h4>1. App icons (optional)</h4>
  <p>
    If you want to override the default icons, you will need to copy app icons for all resolutions to the directories in <code>android/app/src/main/res</code>. Be careful
    only to override the image ressources. If you are looking for a fast and easy way to create all necessary icons, you can use
    an <a href="https://appmaker.merq.org/tools/">online app icon creator</a>.
    <br/>
  </p>
  <h4>2. Building an APK</h4>
  <div class="alert alert-warning" role="alert">You will need to revert the changes made during this step, so be sure to commit first.</div>
  <p>
    Before BuddyBuild can deploy your application to Google Play, you will need to upload an APK manually once. You can create this
    initial APK by following the instructions given in the <a href="https://facebook.github.io/react-native/docs/signed-apk-android.html">react-native documentation</a>.
    After you have created the APK, be sure to revert the changes you made to your Android project files. BuddyBuild does all the code signing
    for you.
    <br/><br/>
  </p>
  <h3 id="apple-developer">Apple Developer</h3>
  <p>
    Next, we'll set up the app in our Apple Developer account.
  </p>
  <h4>1. Create App ID</h4>
  <p>
    In your <a href="https://developer.apple.com/account">Apple Developer account</a>, navigate to <code>Certificates, IDs &amp; Profiles -> Identifiers -> App IDs</code> and create a new App identifier.
    Be sure to use the <code>Bundle ID</code> you set up for the app when configuring the iOS project files.<br/><br/>
    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#appId" aria-expanded="false" aria-controls="appId">
      Show/hide Screenshot
    </button>
    <div class="collapse" id="appId">
      <img class="img-responsive" src="../assets/images/react-native-apple-developer.png" />
    </div>
    <br/>
  </p>
  <h3 id="itunes-connect">iTunes Connect</h3>
  <p>
    We also need to set up the application for delivery via iTunes Connect.
  </p>
  <h4>1. Create new application</h4>
  <p>
    In <a href="https://itunesconnect.apple.com/WebObjects/iTunesConnect.woa/ra/ng/">iTunes Connect</a>, navigate to <code>My Apps</code>
    and click the <code>+</code> button. Follow the instruction to create a new application.
    <br/><br/>
    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#iTunesConnect" aria-expanded="false" aria-controls="iTunesConnect">
      Show/hide Screenshot
    </button>
    <div class="collapse" id="iTunesConnect">
      <img class="img-responsive" src="../assets/images/react-native-itunes-connect.png" />
    </div>
    <br/>
  </p>
  <h4>2. Grant permissions</h4>
  <p>
    In <a href="https://itunesconnect.apple.com/WebObjects/iTunesConnect.woa/ra/ng/">iTunes Connect</a>, navigate to <code>Users &amp; Roles</code>.
    Assign the newly created app to the codecentric labs zero user by adding it to the list of applications on the <code>Roles</code> tab.<br/><br/>
    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#connectPermissions" aria-expanded="false" aria-controls="connectPermissions">
      Show/hide Screenshot
    </button>
    <div class="collapse" id="connectPermissions">
      <img class="img-responsive" src="../assets/images/react-native-itunes-connect-permissions.png" />
    </div>
    <br/>
  </p>
  <h3 id="google-play">Google Play</h3>
  <p>
    For the Android version, we will need to set up a new application in Google Play.
  </p>
  <h4>1. Create new application</h4>
  <p>
    In the <a href="https://play.google.com/apps/publish/">Google Play Developer Console</a>, create a new app by clicking
    the button.
    <br/><br/>
    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#gplay1" aria-expanded="false" aria-controls="gplay1">
      Show/hide Screenshot
    </button>
    <div class="collapse" id="gplay1">
      <img class="img-responsive" src="../assets/images/react-native-gplay-1.png" />
    </div>
    <br/>
  </p>
  <h4>2. Configure the application</h4>
  <p>
    Configuring a new application on Google Play is a little bit more involved than the iOS equivalent. Fortunately, you
    can check what's missing by using the <code>why can't I publish anything</code> link on the upper right corner. For your
    convenience, we included default media for this step in the project's <code>default-assets</code> folder.
    <br/><br/>
    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#gplay2" aria-expanded="false" aria-controls="gplay2">
      Show/hide Screenshot
    </button>
    <div class="collapse" id="gplay2">
      <img class="img-responsive" src="../assets/images/react-native-google-play-2.png" />
    </div>
    <br/>
  </p>
  <h4>3. Upload APK</h4>
  <p>
    Once you have finished all other configuration steps, you can upload your APK to the tracks you want BuddyBuild to publish in.
    <br/><br/>
    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#gplay3" aria-expanded="false" aria-controls="gplay3">
      Show/hide Screenshot
    </button>
    <div class="collapse" id="gplay3">
      <img class="img-responsive" src="../assets/images/react-native-google-play-3.png" />
    </div>
    <br/>
  </p>
  <h3 id="circleci">CircleCI</h3>
  <p>
    <a href="https://circleci.com">CircleCI</a> will be used to automatically merge into <code>master</code> and tag a release whenever changes are pushed
    to <code>develop</code> and all tests are green. We will later set up BuddyBuild to publish the application from
    <code>master</code> to enable continuous delivery.
  </p>
  <h4>1. Add project</h4>
  <p>
    In the <a href="https://circleci.com/dashboard">CircleCI dashboard</a>, add the app's GitHub repository as a new project.
    A <code>circle.yml</code> and a merge script are created during bootstrap, so no additional build configuration is required.
  <br/>
  </p>
  <h4>2. Grant write access</h4>
  <p>
    By default, only read access is granted to CircleCI. To enable write access, you will need to create an additional SSH and add
    it to CircleCI and GitHub. Follow these <a href="https://circleci.com/docs/adding-read-write-deployment-key/">instructions</a>.
    <br/><br/>
    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#circleKey" aria-expanded="false" aria-controls="circleKey">
      Show/hide Screenshot
    </button>
    <div class="collapse" id="circleKey">
      <img class="img-responsive" src="../assets/images/react-native-ssh-circleci.png" />
      <br/>
      <img class="img-responsive" src="../assets/images/react-native-ssh-github.png" />
    </div>
    <br/>
  </p>
  <h3 id="buddybuild">BuddyBuild</h3>
  <div class="alert alert-warning" role="alert">You will need to configure everything twice: Once for the iOS and once for the Android version of the project.</div>
  <p>
    The final step is configuring <a href="https://www.buddybuild.com/">BuddyBuild</a> to build, sign and deploy new version of the application whenever a commit on the
    <code>master</code> branch is detected.
  </p>
  <h4>1. Add projects</h4>
  <p>
    BuddyBuild can automatically detect and configure react-native builds. All you need to do is add the GitHub repository of the application and
    choose which application should be added. Make sure that BuddyBuild is working on the <code>master</code> branch when doing this.<br/><br/>
    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#bbNewProject" aria-expanded="false" aria-controls="bbNewProject">
      Show/hide Screenshot
    </button>
    <div class="collapse" id="bbNewProject">
      <img class="img-responsive" src="../assets/images/react-native-buddybuild-1.png" />
    </div>
    <br/>
  </p>
  <h4>2. Configure projects</h4>
  <p>
    First, disable all branches but <code>master</code> by unchecking everything in the branch settings dialogue. Configure <code>master</code> to only
    build on pushes. Also, make sure that only the <code>Release</code> version is being built.<br/><br/>
    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#bbConfiguration" aria-expanded="false" aria-controls="bbConfiguration">
      Show/hide Screenshot
    </button>
    <div class="collapse" id="bbConfiguration">
      <img class="img-responsive" src="../assets/images/react-native-buddybuild-2.png" />
      <br/>
      <img class="img-responsive" src="../assets/images/react-native-buddybuild-8.png" />
    </div>
    <br/>
  </p>
  <h4>3. Code signing</h4>
  <p>
    Go to each project's settings and follow the instructions given on the application signing pages. For iOS, this will include exporting and
    uploading your certificates. For Android, you will need to create and upload a keystore.<br/><br/>
    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#bbSigning" aria-expanded="false" aria-controls="bbSigning">
      Show/hide Screenshot
    </button>
    <div class="collapse" id="bbSigning">
      <img class="img-responsive" src="../assets/images/react-native-buddybuild-settings.png" />
      <br/>
      <img class="img-responsive" src="../assets/images/react-native-buddybuild-3.png" />
      <br/>
      <img class="img-responsive" src="../assets/images/react-native-buddybuild-4.png" />
    </div>
    <br/>
  </p>
  <h4>4. Configure deployments</h4>
  <p>
    Go to each project's deployment tab and set up delivery via BuddyBuild for each build of the <code>master</code> branch, adding members to the test groups as needed. Configure
    deployments via Testflight and Google Play Alpha or Beta channels to happen once a day from the <code>master</code> branch. Please note that you will need <tbody>
    connect BuddyBuild with the target marketplace. Follow the instructions given on the deployment pages and make sure that you deploy <thead>
    release variant of the application.<br/><br/>
    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#bbDeployments" aria-expanded="false" aria-controls="bbDeployments">
      Show/hide Screenshot
    </button>
    <div class="collapse" id="bbDeployments">
      <img class="img-responsive" src="../assets/images/react-native-buddybuild-deployments.png" />
      <br/>
      <img class="img-responsive" src="../assets/images/react-native-buddybuild-5.png" />
      <br/>
      <img class="img-responsive" src="../assets/images/react-native-buddybuild-6.png" />
      <br/>
      <img class="img-responsive" src="../assets/images/react-native-buddybuild-7.png" />
    </div>
    <br/>
  </p>
</section>

<section class="bs-docs-section">
  <h1 id="unit-testing">Unit Testing</h1>
  <p>
    After the latest changes to Jest, we recently switched back to using the default React Native test setup. You can have a look at the
    <a href="https://github.com/codecentric-labs-zero/react-native-project-template/tree/create-generator/generator-cclz-react-native/app/templates/test">test directory</a>
    in our template to see the details.
  </p>
  <h3 id="test-libraries">Libraries</h3>
  <p>
    We use the following libraries for writing and running unit tests:
  </p>
  <ul>
    <li><a href="https://facebook.github.io/jest/">Jest</a> as test-runner, for test doubles and for assertions</li>
    <li><a href="https://github.com/arnaudbenard/redux-mock-store">redux-mock-store</a> for testing actions</li>
    <li>
      <a href="https://github.com/airbnb/enzyme">Enzyme</a> and <a href="https://github.com/thejameskyle/react-test-renderer">react-test-renderer</a> for testing components and containers
    </li>
  </ul>
  <h3 id="running-tests">Running the tests</h3>
  <p>
    You can run the tests from the command line by executing <code>npm test</code>. For <a href="https://www.jetbrains.com/webstorm/">WebStorm</a>, there is no dedicated Jest test runner
    yet, but you can create a test run configuration by following <a href="https://youtrack.jetbrains.com/issue/WEB-14979#comment=27-1518879">these instructions</a>.
    As <a href="https://circleci.com/">CircleCI</a> is automatically running <code>npm test</code>, no additional setup is needed for continuous integration.
  </p>
</section>

<section class="bs-docs-section">
  <h1 id="functional-testing">Functional Testing</h1>
  <p>
    We use <a href="http://appium.io/">appium</a> for functional testing. To run our appium tests as part of our continuous delivery pipeline, we use <a href="http://bitbar.com/">Bitbar Testing (Testdroid)</a> and
    a <a href="http://docs.buddybuild.com/docs/custom-prebuild-and-postbuild-steps">custom build step on BuddyBuild</a>. The following sections describe our approach.
  </p>
  <h3 id="install-appium">Install appium</h3>
  <p>
    Follow the <a href="http://appium.io/slate/en/master/?javascript#setting-up-appium">instructions</a> to install appium for your platform.
  </p>
  <h3 id="preparing-the-app">Preparing the App</h3>
  <p>
    We write our actual tests with <a href="https://github.com/admc/wd">WD.js</a>, which you will need to install via <code>rpm install --save-dev wd</code>.
    In order to execute the tests locally and on BuddyBuild, we use a npm script:<br/><br/>
    <code>
      "functional-tests": "jest --config=jest-functional-tests.json"
    </code>
    <br/><br/>
    Have a look at <a href="https://gist.github.com/nilswloka/1ba5ae100187ce1a6e741a471cb36348#file-jest-functional-tests-json">a sample configuration file</a> for
    the details.
    We will also need to exclude our specs from the normal test runs by adding<br/><br/>
    <code>
      "testPathIgnorePatterns": [
        "&lt;rootDir&gt;/specs/",
        "&lt;rootDir&gt;/node_modules/"
      ]
    </code>
    <br/><br/>
    to the Jest configuration block.
  </p>
  <h3 id="preparing-bitbar">Preparing Bitbar</h3>
  <p>
    In your <a href="https://cloud.testdroid.com/#service/projects">Bitbar project overview</a>, you need to create a new project. Make sure to choose the right type
    (either "Appium Android" or "Appium iOS") from the drop down. You will need to use the exact project name when setting up your WD test later on.
    <br/><br/>
    <img class="img-responsive" src="../assets/images/bitbar-project.png" />
    <br/><br/>
    Also, <a href="https://cloud.testdroid.com/#service/devicegroups">find the device</a> you want to use and note it's name.
    <br/><br/>
    <img class="img-responsive" src="../assets/images/bitbar-device.png" />
    <br/><br/>
  </p>
  <h3 id="preparing-buddybuild">Preparing BuddyBuild</h3>
  <p>
    In order to have BuddyBuild run the appium tests on Testdroid, we need to set up some environment variables. <code>TESTDROID</code> needs to be set
    to <code>1</code>. Also, you will need to set <code>TESTDROID_API</code> to the API key found on your <a href="https://cloud.testdroid.com/#service/my-account">Testdroid</a>
    account page.
    At this point, we will also add the <a href="https://gist.github.com/nilswloka/1ba5ae100187ce1a6e741a471cb36348#file-buddybuild_postbuild-sh">custom build script</a>
    to our project. Please note that the script needs to be <a href="http://docs.buddybuild.com/docs/custom-prebuild-and-postbuild-steps#section-post-build">inside the native project folder</a>.
    The example given here is for an Android project. For iOS projects, you can use <code>$BUDDYBUILD_IPA_PATH</code> directly. The build script will upload the latest
    version of the app to Testdroid, export its file name as environment variable and start the functional tests.
  </p>
  <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#buddybuild-env" aria-expanded="false" aria-controls="productName">
    Show/hide Screenshot
  </button>
  <div class="collapse" id="buddybuild-env">
    <img class="img-responsive" src="../assets/images/buddybuild-testdroid-env.png" />
  </div>
  <br/>
  </p>
  <h3 id="writing-the-functional-test">Writing the functional test</h3>
  <p>
    Have a look at <a href="https://gist.github.com/nilswloka/1ba5ae100187ce1a6e741a471cb36348#file-example-spec-js">an example</a> to see how to set up WD.js to run both
    locally and on BuddyBuild. For more information on how to configure the required properties, have a look at the <a href="http://docs.testdroid.com/appium/testdroid-desired-caps/">Testdroid documentation</a>.
  </p>
  <h3 id="running-functional-tests-locally">Running the tests locally</h3>
  <p>
    Start the appium server with <code>appium</code>, then run the tests with <code>npm run functional-test</code>.
  </p>
</section>

<section class="bs-docs-section">
  <h1 id="libraries">Libraries and components</h1>
  <p>We found the following libraries helpful.</p>
  <h3 id="business-logic">Business logic</h3>
  <p>
    We use the <a href="https://facebook.github.io/flux/docs/overview.html">Flux architecture</a> when building React Native applications. For implementing it, we
    use the following libraries:
  </p>
  <ul>
    <li><a href="https://github.com/reactjs/redux">Redux</a> as Flux implementation</li>
    <li><a href="https://github.com/reactjs/react-redux">React Redux</a> for React bindings</li>
    <li><a href="https://github.com/gaearon/redux-thunk">Redux Thunk</a> for implementing asynchronous actions</li>
    <li><a href="https://github.com/rt2zz/redux-persist">Redux Persist</a> for persisting state in between sessions</li>
    <li><a href="https://github.com/KELiON/redux-async-initial-state">Redux Async Initial State</a> if we need to asynchronously initialize our Redux store</li>
  </ul>
  <h3 id="hardware-access">Hardware access</h3>
  <p>
    We have had good experiences with the following libraries for accessing hardware:
  </p>
  <ul>
    <li>
      <a href="https://github.com/lwansbrough/react-native-camera">react-native-camera</a> (iOS) and
      <a href="https://github.com/ideacreation/react-native-barcodescanner">react-native-barcodescanner</a> (Android)
      for using the camera to scan barcodes.
    </li>
    <li>
      <a href="https://github.com/rusel1989/react-native-bluetooth-serial">react-native-bluetooth-serial</a> for establishing serial connections via bluetooth
    </li>
    <li>
      <a href="https://github.com/zmxv/react-native-sound">react-native-sound</a> for playing sound files
    </li>
  </ul>
  <h3 id="navigation">Navigation</h3>
  <p>
    After struggling with <a href="https://github.com/aksonov/react-native-redux-router">react-native-redux-router's</a> abstractions, we decided to implement
    our own navigation and routing stack with the <a href="https://github.com/facebook/react-native/tree/master/Libraries/CustomComponents/NavigationExperimental">NavigationExperimental</a>
    primitives when we need to. We found <a href="https://github.com/aksonov/react-native-tabs">react-native-tabs</a> to work fine for us when implementing tabbed navigation.
  </p>
  <h3 id="typography">Typography and Icons</h3>
  <p>
    We use <a href="https://github.com/oblador/react-native-vector-icons">react-native-vector-icons</a> a lot.
  </p>
  <h3 id="stylesheet">Stylesheets</h3>
  <p>
    To work around rendering differences on Android and iOS, we usually use <a href="https://github.com/knowbody/react-native-platform-stylesheet">react-native-platform-stylesheet</a>
  </p>
  <h3 id="backend-communication">Communication with backends</h3>
  <p>
    We use the following libraries when having the need for backend communication:
  </p>
  <ul>
    <li><a href="https://github.com/mzabriskie/axios">axios</a> for HTTP-based communication (with <a href="https://github.com/ctimmerm/axios-mock-adapter">axios-mock-adapter</a> for testing)</li>
    <li><a href="https://github.com/evollu/react-native-fcm">react-native-fcm</a> for push notifications with <a href="https://firebase.google.com/docs/cloud-messaging/">Firebase Cloud Messaging</a></li>
  </ul>
</section>
<section class="bs-docs-section">
  <h1 id="apteligentIntegration">Mobile monitoring with apteligent</h1>
  <p>We are using <a href="https://www.apteligent.com/">Apteligent</a> for monitoring of mobile applications.<br/>
    Steps for integrating apteligent into mobile application for android are:
    <ul>
      <li>Register the application on your apteligent account</li>
      <li>In apps build.grade file add dependency<br/>
        <code>compile 'com.crittercism:crittercism-android-agent:+'</code>
      </li>
      <li>In AndroidManifest.xml file add the following permissions:<br/>
        <code>&lt;uses-permission android:name="android.permission.INTERNET"/&gt;</code><br/>
        <code>&lt;uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/&gt;</code>
      </li>
      <li>
        In MainActivity.java file add imports<br/>
        <code>import com.crittercism.app.Crittercism;</code><br/>
        <code>import android.os.Bundle;</code><br/>
        and override onCreate method:<br/>
        <code>
          @Override<br/>
          protected void onCreate(Bundle bundleInstance) {<br/>
            super.onCreate(bundleInstance);<br/>
            Crittercism.initialize(getApplicationContext(), "CRITTERCISM_APP_ID");<br/>
          }
        </code></br>
        CRITTERCISM_APP_ID can be found in App settings when you access the application<br/>
        registered in the first step
      </li>
    </ul>
  </p>
</section>
